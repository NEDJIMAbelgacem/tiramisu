if (${USE_GPU})
    add_subdirectory(linear_algebra/blas/level3/sgemm/gpu)
    add_subdirectory(linear_algebra/chain_mm/gpu)
    if (${USE_CUDNN})
        add_subdirectory(DNN/blocks/LSTM/gpu)
        add_subdirectory(DNN/blocks/LSTM/gpu_lib)
    endif()
endif()
add_subdirectory(DNN/layers/convolution/direct/cpu)
add_subdirectory(DNN/layers/convolution/direct/cpu_3channels)
add_subdirectory(DNN/layers/convolution/direct/sparse)
add_subdirectory(DNN/layers/convolution/direct/sparse_stride2_convolution)
add_subdirectory(DNN/layers/convolution/direct/sparse_32channels)
add_subdirectory(DNN/layers/convolution/direct/unrolled_convolution)
add_subdirectory(DNN/layers/convolution/direct/cpu_sparse_with_dense)
add_subdirectory(DNN/layers/convolution/direct/unrolled_conv2)
add_subdirectory(DNN/layers/convolution/direct/unrolled_conv3)
add_subdirectory(DNN/layers/convolution/direct/cpu_optimal_unrolled)
add_subdirectory(DNN/layers/bn/cpu)
add_subdirectory(DNN/layers/relu/cpu)
add_subdirectory(DNN/layers/maxpool/cpu)
add_subdirectory(DNN/layers/transpose_conv)
add_subdirectory(DNN/blocks/conv2/cpu/dense)
add_subdirectory(DNN/blocks/LSTM/cpu)
add_subdirectory(DNN/blocks/LSTM/cpu_lib)
add_subdirectory(DNN/blocks/LSTM/cpu_lib_sparse)
add_subdirectory(DNN/blocks/vggBlock/cpu/dense)
add_subdirectory(DNN/blocks/vggBlock/cpu/sparse)
add_subdirectory(DNN/blocks/fusedresNet/cpu/dense)
add_subdirectory(DNN/blocks/fusedresNet_inference/cpu/sparse)
add_subdirectory(DNN/blocks/fusedresNet_inference/cpu/dense)
add_subdirectory(DNN/blocks/DenseNetBlock/cpu/dense)
add_subdirectory(DNN/blocks/Conv-ReLU-MaxPool/cpu/dense)
add_subdirectory(DNN/blocks/Conv-ReLU-MaxPool/cpu/sparse)
add_subdirectory(DNN/blocks/Resize-Conv-ReLU-MaxPool/cpu/dense)
add_subdirectory(DNN/blocks/Resize-Conv-ReLU-MaxPool/cpu/sparse)
add_subdirectory(DNN/blocks/Conv-Relu-FC-Softmax/cpu/dense)

add_subdirectory(tensors/baryon/gpu)
add_subdirectory(tensors/baryon/tiramisu_make_fused_baryon_blocks_correlator_gpu)
add_subdirectory(tensors/baryon/debug_tiramisu_make_fused_baryon_blocks_correlator_gpu)
